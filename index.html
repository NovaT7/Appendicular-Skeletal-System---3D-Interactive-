<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Appendicular Skeletal System - 3D Interactive</title>

    <!-- THREE.js and GLTFLoader (must load BEFORE your code) -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.128/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128/examples/js/loaders/GLTFLoader.js"></script>



    <style>
        * { margin:0; padding:0; box-sizing:border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg,#667eea 0%,#764ba2 100%);
            color:#333; min-height:100vh;
        }
        .container { max-width:1400px; margin:0 auto; padding:20px; }
        header { text-align:center; color:white; padding:30px 0; margin-bottom:30px; }
        header h1 { font-size:2.5em; margin-bottom:10px; text-shadow:2px 2px 4px rgba(0,0,0,0.3); }
        header p { font-size:1.1em; opacity:0.95; }

        .tabs { display:flex; justify-content:center; gap:10px; margin-bottom:30px; flex-wrap:wrap; }
        .tab {
            background:white; border:none; padding:12px 26px; font-size:1.05em; font-weight:600;
            cursor:pointer; border-radius:10px; transition:all .25s; box-shadow:0 4px 6px rgba(0,0,0,0.1);
        }
        .tab:hover { transform:translateY(-3px); }
        .tab.active { background:#667eea; color:white; }

        .content-wrapper {
            display:grid; grid-template-columns:1fr 1fr; gap:20px;
            background:white; border-radius:15px; overflow:hidden; box-shadow:0 10px 30px rgba(0,0,0,0.2);
        }

        #canvas-container { position:relative; min-height:600px; background:#f8f9fa; }
        .loading {
            position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
            font-size:1.2em; color:#667eea; font-weight:700;
        }
        .loading.error { color:#e74c3c; }

        .controls-info {
            position:absolute; bottom:10px; left:10px; background:rgba(255,255,255,0.92);
            padding:10px 15px; border-radius:8px; font-size:0.9em; color:#555;
        }

        .info-panel { padding:30px; overflow-y:auto; max-height:600px; color:#333; }
        .info-panel h2 { color:#667eea; margin-bottom:12px; font-size:1.6em; }
        .info-panel h3 { color:#764ba2; margin-top:18px; margin-bottom:8px; font-size:1.1em; }
        .info-panel ul { list-style-position:inside; line-height:1.8; color:#555; }
        .info-panel li { margin-bottom:8px; }

        .section-content { display:none; }
        .section-content.active { display:block; }

        @media (max-width:968px) {
            .content-wrapper { grid-template-columns:1fr; }
            #canvas-container { height:420px; }
            .info-panel { max-height:none; }
            header h1 { font-size:1.8em; }
        }
        /* -------- WEBSITE LOADER -------- */
#pageLoader {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #f5f9ff; 
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    transition: opacity 0.6s ease, visibility 0.6s ease;
}

#pageLoader p {
    margin-top: 12px;
    font-size: 18px;
    font-weight: 600;
    color: #234f9d;
}

/* Loading Circle Animation */
.loader-circle {
    width: 55px;
    height: 55px;
    border: 5px solid #c7d9f5;
    border-top-color: #234f9d;
    border-radius: 50%;
    animation: spin 0.9s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}
#introScreen {
  position: fixed; top:0; left:0; width:100%; height:100%; background:#000;
  display:flex; align-items:center; justify-content:center; flex-direction:column;
  z-index:9999; overflow:hidden;
}
#introCanvas {
  position:absolute; width:100%; height:100%; top:0; left:0;
}
.introText {
  position:relative; color:#fff; text-align:center; opacity:0;
  animation: fadeInText 2.5s ease forwards 1s;
}
.introText h1 {
  font-size:3em; letter-spacing:2px; margin:0;
}
.introText p {
  font-size:1.2em; margin-top:10px; opacity:0.8;
}
@keyframes fadeInText {
  from { opacity:0; transform: translateY(30px); }
  to { opacity:1; transform: translateY(0); }
}
#introScreen.fadeOut {
  opacity:0; pointer-events:none; transition: opacity 1s ease;
}

    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ü¶¥ Appendicular Skeletal System</h1>
            <p>Interactive 3D Anatomy Explorer</p>
        </header>

        <div class="tabs">
            <button class="tab active" data-section="introduction">Introduction</button>
            <button class="tab" data-section="pectoral-girdle">Pectoral Girdle</button>
            <button class="tab" data-section="upper-limb">Upper Limb</button>
            <button class="tab" data-section="pelvic-girdle">Pelvic Girdle</button>
            <button class="tab" data-section="lower-limb">Lower Limb</button>
            <button class="tab" data-section="relevance">Relevance in health care</button>
        </div>

        <div class="content-wrapper">
            <div id="canvas-container">
                <div class="loading">Loading 3D Model...</div>

                <!-- Visuals area (left column of the page). It is split 50/50: model-area (left) and diagram-area (right).
                     Place your diagram image at: ./model/introduction_diagram.png (or change the path in IMAGE_URLS).
                     Example absolute path: c:\\Users\\paula\\Desktop\\bunty\\model\\introduction_diagram.png -->
                <div id="visuals" style="display:flex; width:100%; height:100%;">
                    <div id="model-area" style="width:50%; height:100%; position:relative; background:#f8f9fa;"></div>
                    <div id="diagram-area" style="width:50%; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:flex-start; background:#ffffff; overflow-y:auto; padding:10px;">
                        <img id="content-diagram" alt="Diagram" style="display:none; width:95%; height:auto; object-fit:contain; margin:5px 0;" />
                        <img id="content-diagram-2" alt="Diagram 2" style="display:none; width:95%; height:auto; object-fit:contain; margin:5px 0;" />
                    </div>
                </div>
            </div>

            <div class="info-panel">
                <!-- Diagram image for Introduction and image-only sections -->
                <!-- Place your uploaded diagram image at: ./model/introduction_diagram.png -->
                <!-- Example path on your machine: c:\\Users\\paula\\Desktop\\bunty\\model\\introduction_diagram.png -->

                <!-- Introduction info (text for the 3D model view) -->
                <div class="section-content active" id="introduction-info">
                    <h2>Skeletal System</h2>

<p>
The skeletal system includes all the bones and joints in the body.  
It forms the inner structure that provides support, protection, posture, and shape to the body.
</p>

<hr>

<h3>Parts of the Skeletal System</h3>
<ul>
    <li><strong>Bones (Skeleton)</strong></li>
    <li><strong>Joints</strong></li>
    <li><strong>Cartilage</strong></li>
    <li><strong>Ligaments</strong> ‚Äì connect bone to bone</li>
    <li><strong>Tendons</strong> ‚Äì connect bone to muscle</li>
</ul>

<hr>

<h3>Skeleton</h3>
<p>The adult human skeleton usually consists of <strong>206 bones</strong>.  
These bones are grouped into two divisions:</p>

<h4>1. Axial Skeleton</h4>
<ul>
    <li>Lies along the central axis of the body.</li>
    <li>Consists of <strong>80 bones</strong>.</li>
    <li>Includes:
        <ul>
            <li>Head (Skull)</li>
            <li>Vertebral Column</li>
            <li>Ribs</li>
            <li>Sternum</li>
        </ul>
    </li>
</ul>

<h4>2. Appendicular Skeleton</h4>
<p>
‚ÄúAppendicular‚Äù refers to limbs or appendages.  
This division contains <strong>126 bones</strong> and includes the free limbs and their attachments (girdles).
</p>

<h5>Parts of the Appendicular Skeleton</h5>
<ul>
    <li>Pectoral Girdle</li>
    <li>Upper Limb (Hand)</li>
    <li>Pelvic Girdle</li>
    <li>Lower Limb (Leg)</li>
</ul>

<hr>

<h3>Descriptive / Key Terms</h3>
<ul>
    <li><strong>Appendage:</strong> A limb.</li>
    <li><strong>Articulation:</strong> The point where two bones meet.</li>
    <li><strong>Foramen:</strong> An opening or hole in a bone.</li>
    <li><strong>Process:</strong> A projection or outward extension of a bone.</li>
</ul>

<hr>

<h3>Bones of Each Limb (30 Bones Each)</h3>

<h4>Upper Limb (Forelimb)</h4>
<ul>
    <li>Humerus ‚Äì 1</li>
    <li>Radius ‚Äì 1</li>
    <li>Ulna ‚Äì 1</li>
    <li>Carpals (Wrist Bones) ‚Äì 8</li>
    <li>Metacarpals (Palm Bones) ‚Äì 5</li>
    <li>Phalanges (Digits) ‚Äì 14</li>
</ul>

<h4>Lower Limb (Hind Limb)</h4>
<ul>
    <li>Femur (Thigh Bone, longest bone) ‚Äì 1</li>
    <li>Tibia ‚Äì 1</li>
    <li>Fibula ‚Äì 1</li>
    <li>Patella (Knee Cap) ‚Äì 1</li>
    <li>Tarsals (Ankle Bones) ‚Äì 7</li>
    <li>Metatarsals ‚Äì 5</li>
    <li>Phalanges (Digits) ‚Äì 14</li>
</ul>

                </div>

                <!-- Pectoral Girdle (Image-only) -->
                <div class="section-content" id="pectoral-girdle-info">
                    <h2>Pectoral Girdle (Shoulder Girdle)</h2>

                            <p>
                            Girdles are the attachments that connect our appendicular skeleton system to the axial skeleton.  
                            The pectoral (shoulder) girdle consists of two bones:
                            </p>

                            <ul>
                                <li>Scapula</li>
                                <li>Clavicle</li>
                            </ul>

                            <hr>

                            <h3>1. Scapula</h3>
                            <ul>
                                <li>It is a flat, triangular bone, also called the shoulder blade.</li>
                                <li>It consists of two bony processes:
                                    <ul>
                                        <li><strong>Acromion Process</strong></li>
                                        <li><strong>Coracoid Process</strong></li>
                                    </ul>
                                </li>
                            </ul>

                            <h4>Acromion Process</h4>
                            <ul>
                                <li>Articulates with the clavicle.</li>
                            </ul>

                            <h4>Coracoid Process</h4>
                            <ul>
                                <li>A small hook-like structure attached to the anterior part of the scapula.</li>
                                <li>Along with the acromion, it helps stabilize the shoulder joint.</li>
                            </ul>

                            <h4>Acromioclavicular Joint</h4>
                            <ul>
                                <li>The joint connecting the scapula with the clavicle.</li>
                            </ul>

                            <h4>Glenoid Cavity (Glenohumeral Joint)</h4>
                            <ul>
                                <li>The humerus connects with the scapula through the glenoid cavity.</li>
                            </ul>

                            <hr>

                            <h3>2. Clavicle (Collar Bone)</h3>
                            <ul>
                                <li>An elongated S-shaped bone.</li>
                                <li>Extends between the sternum and the acromion of the scapula.</li>
                            </ul>

                            <h4>Sternoclavicular Joint</h4>
                            <ul>
                                <li>The joint that attaches the clavicle to the sternum.</li>
                            </ul>

                            <hr>

                            <h3>Functions of the Pectoral Girdle</h3>
                            <ul>
                                <li>Supports the upper limb.</li>
                                <li>Provides attachment for muscles.</li>
                                <li>Forms the shoulder.</li>
                                <li>Clavicle attaches the axial skeleton to the appendicular skeleton.</li>
                            </ul>

                </div>
                <!-- Upper Limb (Image-only) -->
                <div class="section-content" id="upper-limb-info">
                    <h2>Upper Limb Bones </h2>

<hr>

<h3>1) Radius</h3>
<p>
The radius is the lateral bone of the forearm, located on the thumb side.  
It enables wrist rotation and fine hand movements such as turning a key or flipping a page, making it essential for dexterity and control.
</p>

<hr>

<h3>2) Ulna</h3>
<p>
The ulna lies on the little finger side of the forearm.  
It forms the elbow joint and provides stability during arm movements, especially while lifting or pushing.
</p>

<hr>

<h3>3) Carpals</h3>
<p>
These are eight small bones arranged in two rows at the wrist.  
They form the base of the hand and allow various wrist motions including flexion, extension, and rotation, such as waving or writing.
</p>

<hr>

<h3>4) Metacarpals</h3>
<p>
Five long bones that form the palm.  
They connect the wrist to the fingers and create the framework for gripping, holding, and expressive hand gestures like clapping or pointing.
</p>

<hr>

<h3>5) Phalanges</h3>
<p>
These are the finger bones‚Äî14 in total per hand.  
Each finger has three phalanges (proximal, middle, distal), except the thumb, which has two.  
They enable precise actions such as typing, grasping, and touching.
</p>

                </div>

                <!-- Pelvic Girdle (Image-only) -->
                <div class="section-content" id="pelvic-girdle-info">
                    <h2>Pelvic Girdle</h2>

                        <p>
                        Connects the axial skeleton to the lower limbs; supports body weight, aids locomotion, and protects pelvic organs.  
                        Shows male‚Äìfemale anatomical differences related to function and movement.
                        </p>

                        <hr>

                        <h3>Hip Bone (Coxal Bone)</h3>
                        <ul>
                            <li>Formed by the fusion of the ilium, ischium, and pubis.</li>
                            <li>Supports abdominal‚Äìpelvic organs and provides muscle attachment.</li>
                        </ul>

                        <h4>Sacral Connection</h4>
                        <ul>
                            <li>Ilium articulates with the sacrum at the sacroiliac joint.</li>
                            <li>Transfers upper-body weight; stabilized by strong ligaments.</li>
                        </ul>

                        <hr>

                        <h3>Parts of the Hip Bone</h3>

                        <h4>Ilium</h4>
                        <ul>
                            <li>Largest and superior part of the hip bone.</li>
                            <li>Includes iliac crest, ASIS (Anterior Superior Iliac Spine), and iliac fossa.</li>
                            <li>Supports trunk weight and provides major muscle attachments.</li>
                        </ul>

                        <h4>Ischium</h4>
                        <ul>
                            <li>Posteroinferior region of the hip bone.</li>
                            <li>Contains the ischial tuberosity (‚Äúsitting bone‚Äù).</li>
                            <li>Anchors hamstrings and bears body weight while sitting.</li>
                        </ul>

                        <h4>Pubis</h4>
                        <ul>
                            <li>Anterior part of the hip bone.</li>
                            <li>Forms part of the obturator foramen.</li>
                            <li>Supports pelvic organs and anchors thigh muscles.</li>
                        </ul>

                        <h4>Pubic Symphysis</h4>
                        <ul>
                            <li>Fibrocartilaginous joint between the left and right pubic bones.</li>
                            <li>Allows slight movement and widens during childbirth.</li>
                        </ul>

                        <hr>

                        <h3>Important Structures</h3>

                        <h4>Acetabulum</h4>
                        <ul>
                            <li>A deep socket formed by the ilium, ischium, and pubis.</li>
                            <li>Articulates with the head of the femur.</li>
                            <li>Transfers upper-body weight to the lower limbs.</li>
                        </ul>

                        <h4>Obturator Foramen</h4>
                        <ul>
                            <li>Large opening between the pubis and ischium.</li>
                            <li>Allows passage of nerves and blood vessels.</li>
                            <li>Reduces bone mass while maintaining strength.</li>
                        </ul>

                        <hr>

                        <h3>Female Pelvis</h3>
                        <ul>
                            <li>Wider and shallower.</li>
                            <li>Larger pelvic inlet and outlet.</li>
                            <li>Broader pubic arch (‚â• 90¬∞).</li>
                            <li>Adapted for childbirth.</li>
                        </ul>

                        <h3>Male Pelvis</h3>
                        <ul>
                            <li>Narrower, heavier, and deeper.</li>
                            <li>Smaller and heart-shaped pelvic inlet.</li>
                            <li>Pubic arch &lt; 90¬∞.</li>
                            <li>Adapted for strength and load-bearing.</li>
                        </ul>
                </div>

                <!-- Lower Limb (Image-only) -->
                <div class="section-content" id="lower-limb-info">
                    <h2>Primary Functions of Lower limb</h2>
                        <ul>
                            <li>Supporting the body's weight</li>
                            <li>Locomotion (movement)</li>
                        </ul>

                        <hr>

                        <h2>2. Skeletal System</h2>

                        <h3>Overview</h3>
                        <ul>
                            <li>The lower limbs contain <strong>60 bones</strong> in total.</li>
                            <li>Includes: pelvis, femur, patella, tibia, fibula, and foot bones.</li>
                        </ul>

                        <h3>Pelvis</h3>
                        <ul>
                            <li>Formed by the hip bones, sacrum, and coccyx.</li>
                        </ul>

                        <h3>Femur</h3>
                        <ul>
                            <li>The longest and strongest bone in the body.</li>
                            <li>Located in the thigh.</li>
                        </ul>

                        <h3>Leg Bones</h3>
                        <ul>
                            <li><strong>Tibia:</strong> Medial, weight-bearing bone.</li>
                            <li><strong>Fibula:</strong> Lateral, slender bone.</li>
                        </ul>

                        <h3>Patella</h3>
                        <ul>
                            <li>Kneecap; a sesamoid bone.</li>
                            <li>Protects the knee joint.</li>
                        </ul>

                        <h3>Foot</h3>
                        <ul>
                            <li><strong>Tarsals:</strong> 7 bones</li>
                            <li><strong>Metatarsals:</strong> 5 bones</li>
                            <li><strong>Phalanges:</strong> 14 bones</li>
                        </ul>

                        <hr>

                        <h2>3. Joints</h2>

                        <h3>Hip Joint</h3>
                        <ul>
                            <li>A ball-and-socket synovial joint.</li>
                            <li>Connects the lower limb to the axial skeleton.</li>
                            <li>Supported by a joint capsule, ligaments, and muscles.</li>
                        </ul>

                        <h3>Knee Joint</h3>
                        <ul>
                            <li>The largest joint in the body.</li>
                            <li>Acts primarily as a hinge joint for flexion and extension.</li>
                            <li>Allows limited side-to-side movement.</li>
                        </ul>

                        <h3>Ankle Joint</h3>
                        <ul>
                            <li>Formed by the tibia, fibula, and talus (a tarsal bone).</li>
                        </ul>

                        <hr>

                        <h2>4. Muscular System</h2>

                        <h3>Compartments</h3>
                        <ul>
                            <li>Muscles are organized into anterior and posterior compartments in both the thigh and leg.</li>
                        </ul>

                        <h3>Key Muscles</h3>
                        <ul>
                            <li>Gluteus maximus</li>
                            <li>Quadriceps</li>
                            <li>Hamstrings</li>
                            <li>Gastrocnemius</li>
                            <li>Tibialis anterior</li>
                        </ul>

               
                </div>

                <!-- Relevance in health care (text-only) -->
                <div class="section-content" id="relevance-info">
                    <div class="relevance-box" style="background:#fff; padding:24px; border-radius:12px; box-shadow:0 6px 20px rgba(0,0,0,0.08);">
                    <h2>Relevance of Studying the Appendicular Skeleton System in Healthcare</h2>

<hr>

<h3>1. Introduction</h3>
<p>
The appendicular skeleton includes the limbs (upper and lower), shoulder girdle, and pelvic girdle.  
It enables movement, mobility, and interaction with the environment.  
Understanding its structure and function is crucial for healthcare professionals.
</p>

<hr>

<h3>2. Clinical Relevance</h3>
<ul>
    <li><strong>Injury Assessment:</strong> Fractures, dislocations, and ligament injuries commonly occur in the limbs. Knowledge of bone anatomy is essential for accurate diagnosis.</li>
    <li><strong>Orthopedic Care:</strong> Understanding the appendicular skeleton helps in casting, surgical interventions, and joint replacement procedures.</li>
    <li><strong>Rehabilitation & Physiotherapy:</strong> Effective rehabilitation programs require detailed knowledge of muscles, bones, and joint mechanics.</li>
</ul>

<hr>

<h3>3. Disease Diagnosis</h3>
<ul>
    <li><strong>Bone Disorders:</strong> Conditions like osteoporosis, arthritis, and congenital deformities affect limb function.</li>
    <li><strong>Musculoskeletal Disorders:</strong> Helps diagnose issues such as carpal tunnel syndrome, shoulder impingement, and hip dysplasia.</li>
</ul>

<hr>

<h3>4. Medical Procedures</h3>
<ul>
    <li><strong>Intravenous Access & Injections:</strong> Bone landmarks guide safe administration of IV lines and injections.</li>
    <li><strong>Surgical Landmarks:</strong> Bone anatomy helps surgeons navigate during minimally invasive and orthopedic surgeries.</li>
</ul>

<hr>

<h3>5. Sports Medicine & Injury Prevention</h3>
<p>
Understanding limb mechanics and joint stress helps prevent injuries and design effective exercise programs.
</p>

<hr>

<h3>6. Education and Research</h3>
<p>
The appendicular skeleton forms the foundation for advanced studies in anatomy, orthopedics, physiotherapy, and biomechanics.  
It is essential for research in prosthetics, implants, and rehabilitation technologies.
</p>

<hr>

<h3>7. Conclusion</h3>
<p>
Knowledge of the appendicular skeleton is vital for patient care, injury management, rehabilitation, and medical research.  
It connects theoretical knowledge with practical application, making it indispensable in healthcare.
</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="introScreen">
  <canvas id="introCanvas"></canvas>
  <div class="introText">
    <h1>Welcome to the <br> Appendicular Skeletal System</h1>
    <p>Interactive 3D Anatomy Explorer</p>
  </div>
</div>



    <!-- ============ SCRIPT ============ -->
    <script>
        // Starfield effect
const canvas = document.getElementById('introCanvas');
const ctx = canvas.getContext('2d');
let stars = [];

function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener('resize', resize);
resize();

function initStars(count) {
  stars = [];
  for (let i=0; i< count; i++) {
    stars.push({
      x: Math.random()*canvas.width,
      y: Math.random()*canvas.height,
      z: Math.random()*canvas.width,
      o: Math.random()
    });
  }
}
initStars(300);

function drawStars() {
  ctx.fillStyle = '#000';
  ctx.fillRect(0,0,canvas.width,canvas.height);
  stars.forEach(s => {
    s.z -= 2;
    if (s.z <= 0) {
      s.z = canvas.width;
      s.x = Math.random()*canvas.width;
      s.y = Math.random()*canvas.height;
      s.o = Math.random();
    }
    const px = (s.x - canvas.width/2) * (canvas.width / s.z) + canvas.width/2;
    const py = (s.y - canvas.height/2) * (canvas.width / s.z) + canvas.height/2;
    const size = canvas.width / s.z;
    ctx.fillStyle = `rgba(255,255,255,${s.o})`;
    ctx.fillRect(px, py, size, size);
  });
  requestAnimationFrame(drawStars);
}
drawStars();

// Hide intro after delay & start main site
window.addEventListener('load', () => {
  setTimeout(() => {
    document.getElementById('introScreen').classList.add('fadeOut');
    // optional: remove the element after fade to allow scroll
    setTimeout(() => {
      document.getElementById('introScreen').style.display = 'none';
    }, 1000);
  }, 3000); // show intro for 3 seconds
});

    // CONFIG
    // Only the 'introduction' tab uses a 3D model. Other tabs will show images or text.
    const MODEL_URLS = {
        'introduction': './model/skeleton.glb'
    };

    // Image placeholders for image-only tabs (SVG data URIs ensure a visible placeholder).
    const IMAGE_URLS = {
        'introduction': './model/ske.jpg',
        'pectoral-girdle': './model/Scapula-intro-front-1.jpg',
        'upper-limb': './model/Form-Ortho-Bones.jpg',
        'pelvic-girdle': ['./model/pel.jpg', './model/pel2.png'],
        'lower-limb': './model/Screenshot (6).png'
    };

    // GLOBALS
    let scene, camera, renderer, currentModel, currentSection = 'introduction';
    let isDragging = false;

    // INIT
    function init(){
        const container = document.getElementById('canvas-container');
        const modelArea = document.getElementById('model-area');

        // Scene & Camera
        scene = new THREE.Scene();
        scene.background = new THREE.Color(0xf8f9fa);

        camera = new THREE.PerspectiveCamera(45, modelArea.clientWidth / modelArea.clientHeight, 0.1, 1000);
        camera.position.set(0,0,5);

        // Renderer
        renderer = new THREE.WebGLRenderer({ antialias:true });
        renderer.setSize(modelArea.clientWidth, modelArea.clientHeight);
        renderer.setPixelRatio(window.devicePixelRatio ? window.devicePixelRatio : 1);
        modelArea.appendChild(renderer.domElement);

        // Lights
        const ambient = new THREE.AmbientLight(0xffffff, 0.6); scene.add(ambient);
        const d1 = new THREE.DirectionalLight(0xffffff, 0.8); d1.position.set(5,5,5); scene.add(d1);
        const d2 = new THREE.DirectionalLight(0xffffff, 0.4); d2.position.set(-5,-5,-5); scene.add(d2);

        // Controls + Load initial
        setupControls();
        loadModelWithCheck(currentSection);

        // Resize
        window.addEventListener('resize', onResize);

        // Start
        animate();
    }

    // Controls (basic)
    function setupControls(){
        const canvas = renderer.domElement;
        let prev = { x:0, y:0 }, right = false;

        canvas.addEventListener('mousedown', e=>{
            isDragging = true;
            right = e.button === 2;
            prev = { x: e.clientX, y: e.clientY };
        });

        canvas.addEventListener('mousemove', e=>{
            if(!isDragging || !currentModel) return;
            const dx = e.clientX - prev.x;
            const dy = e.clientY - prev.y;

            if(right){
                camera.position.x -= dx * 0.01;
                camera.position.y += dy * 0.01;
            } else {
                currentModel.rotation.y += dx * 0.01;
                currentModel.rotation.x += dy * 0.01;
            }

            prev = { x: e.clientX, y: e.clientY };
        });

        canvas.addEventListener('mouseup', ()=> isDragging = false);
        canvas.addEventListener('mouseleave', ()=> isDragging = false);
        canvas.addEventListener('contextmenu', e=> e.preventDefault());

        canvas.addEventListener('wheel', e=>{
            e.preventDefault();
            camera.position.z += e.deltaY * 0.01;
            camera.position.z = Math.max(1, Math.min(12, camera.position.z));
        });
    }

    // Load model but first check the URL (gives clearer errors for 404/CORS)
    async function loadModelWithCheck(section){
        const loadingEl = document.querySelector('.loading');
        const imgEl = document.getElementById('content-diagram');
        const wrapper = document.querySelector('.content-wrapper');
        const canvasContainer = document.getElementById('canvas-container');
        const infoPanel = document.querySelector('.info-panel');
        const modelArea = document.getElementById('model-area');
        const diagramArea = document.getElementById('diagram-area');

        // default hide loading
        loadingEl.style.display = 'none';

        // RELEVANCE: full-width text, hide visuals
        if(section === 'relevance'){
            if(renderer && renderer.domElement) renderer.domElement.style.display = 'none';
            if(imgEl) imgEl.style.display = 'none';
            canvasContainer.style.display = 'none';
            wrapper.style.gridTemplateColumns = '1fr';
            infoPanel.style.display = 'block';
            // ensure model area hidden
            if(modelArea) modelArea.style.display = 'none';
            if(diagramArea) diagramArea.style.display = 'none';
            return;
        }

        // For sections with image + text (including pectoral, upper-limb, pelvic, lower-limb):
        // show left visuals area (50%) and right text (50%). Inside visuals, show diagram full-width and hide model.
        if(section !== 'introduction'){
            // show visuals and info panel
            canvasContainer.style.display = 'block';
            wrapper.style.gridTemplateColumns = '1fr 1fr';
            infoPanel.style.display = 'block';

            // hide model area and show diagram area full-width
            if(modelArea) modelArea.style.display = 'none';
            if(diagramArea){
                diagramArea.style.display = 'flex';
                diagramArea.style.width = '100%';
            }

            // attach image(s) - handle both single image and array of images
            const src = IMAGE_URLS[section] || '';
            const img2El = document.getElementById('content-diagram-2');
            
            if(Array.isArray(src)){
                // Multiple images (like pelvic-girdle)
                if(imgEl){
                    imgEl.src = src[0] || '';
                    imgEl.style.display = src[0] ? 'block' : 'none';
                }
                if(img2El){
                    img2El.src = src[1] || '';
                    img2El.style.display = src[1] ? 'block' : 'none';
                }
            } else {
                // Single image
                if(imgEl){
                    imgEl.src = src;
                    imgEl.style.display = src ? 'block' : 'none';
                }
                if(img2El){
                    img2El.style.display = 'none';
                }
            }

            // ensure renderer hidden
            if(renderer && renderer.domElement) renderer.domElement.style.display = 'none';
            return;
        }

        // INTRODUCTION: visuals split 50/50 inside left column (model-area and diagram-area), right column is text
        canvasContainer.style.display = 'block';
        wrapper.style.gridTemplateColumns = '1fr 1fr';
        infoPanel.style.display = 'block';

        // show both model and diagram areas side-by-side
        if(modelArea){ modelArea.style.display = 'block'; modelArea.style.width = '50%'; }
        if(diagramArea){ diagramArea.style.display = 'flex'; diagramArea.style.width = '50%'; }

        // set diagram image
        if(imgEl){
            const src = IMAGE_URLS['introduction'] || '';
            imgEl.src = src;
            imgEl.style.display = src ? 'block' : 'none';
        }

        // show renderer and ensure it is appended inside modelArea
        if(renderer && renderer.domElement){
            renderer.domElement.style.display = 'block';
            // if not already inside modelArea, append it
            if(renderer.domElement.parentElement !== modelArea){
                // remove from old parent if present
                try { renderer.domElement.remove(); } catch(e){}
                modelArea.appendChild(renderer.domElement);
            }
        }

        // ensure sizes are updated
        onResize();

        loadingEl.classList.remove('error');
        loadingEl.style.display = 'block';
        loadingEl.textContent = 'Checking model...';

        const url = MODEL_URLS[section];
        console.log('Attempting to load model:', url);

        try {
            const res = await fetch(url, { method:'HEAD' });
            if (!res.ok) {
                console.warn('HEAD check failed, trying GET for more info...');
                const getRes = await fetch(url);
                if(!getRes.ok) throw new Error(`HTTP ${getRes.status} ${getRes.statusText}`);
            }
        } catch (err) {
            console.error('Model file check failed:', err);
            loadingEl.classList.add('error');
            loadingEl.textContent = '‚ùå Model file not found or blocked (check path or server).';
            return;
        }

        loadingEl.textContent = 'Loading 3D Model...';
        if (currentModel) {
            try { scene.remove(currentModel); } catch(e){/* ignore */ }
            currentModel = null;
        }

        const loader = new THREE.GLTFLoader();
        loader.load(
            url,
            (gltf) => {
                currentModel = gltf.scene || gltf.scenes?.[0];
                if(!currentModel){
                    console.error('GLTF loaded but no scene found:', gltf);
                    document.querySelector('.loading').classList.add('error');
                    document.querySelector('.loading').textContent = '‚ùå Model loaded but contains no scene.';
                    return;
                }

                const box = new THREE.Box3().setFromObject(currentModel);
                const size = box.getSize(new THREE.Vector3());
                const maxDim = Math.max(size.x, size.y, size.z);
                const scale = maxDim > 0 ? 3 / maxDim : 1;
                currentModel.scale.setScalar(scale);

                const center = box.getCenter(new THREE.Vector3()).multiplyScalar(scale);
                currentModel.position.sub(center);

                scene.add(currentModel);
                document.querySelector('.loading').style.display = 'none';
                // update sizes after model added
                onResize();
                console.log('Model loaded successfully');
            },
            (xhr) => {
                if(xhr && xhr.total) {
                    const pct = Math.round((xhr.loaded / xhr.total) * 100);
                    document.querySelector('.loading').textContent = `Loading... ${pct}%`;
                } else {
                    document.querySelector('.loading').textContent = 'Loading...';
                }
            },
            (err) => {
                console.error('GLTFLoader error:', err);
                const el = document.querySelector('.loading');
                el.classList.add('error');
                el.textContent = '‚ùå Error loading model (see console).';
            }
        );
    }

    function animate(){
        requestAnimationFrame(animate);
        if(currentModel && !isDragging) currentModel.rotation.y += 0.002;
        renderer.render(scene, camera);
    }

    function onResize(){
        const modelArea = document.getElementById('model-area');
        if(!modelArea || !renderer) return;
        camera.aspect = Math.max(1, modelArea.clientWidth) / Math.max(1, modelArea.clientHeight);
        camera.updateProjectionMatrix();
        renderer.setSize(modelArea.clientWidth, modelArea.clientHeight);
    }

    // Tab switching (keeps info content)
    document.querySelectorAll('.tab').forEach(tab=>{
        tab.addEventListener('click', ()=>{
            const section = tab.dataset.section;
            document.querySelectorAll('.tab').forEach(t=> t.classList.remove('active'));
            tab.classList.add('active');

            document.querySelectorAll('.section-content').forEach(s=> s.classList.remove('active'));
            document.getElementById(section + '-info').classList.add('active');

            currentSection = section;
            loadModelWithCheck(section);
        });
    });

    // Start everything
    window.addEventListener('DOMContentLoaded', init);
    /* -------- REMOVE LOADER WHEN PAGE IS READY -------- */
window.onload = () => {
    setTimeout(() => {
        document.getElementById("pageLoader").classList.add("hide");
    }, 300); // small delay for smooth effect
};

    </script>
</body>
</html>
